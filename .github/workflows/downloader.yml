name: download_epg_data

on:
  workflow_dispatch:
  schedule:
    - cron: "30 11 * * *"    #runs at 11:30 UTC everyday

jobs:
  get_epg_data:
    runs-on: ubuntu-latest
    steps:
      - name: checkout repo content
        uses: actions/checkout@v3 # checkout the repository content to github runner.
      - name: setup python
        uses: actions/setup-python@v4
        with:
          python-version: 3.8 #install the python needed
      - name: Install dependencies
        run: pip install requests
      - name: Run a python script inline
        shell: python
        run: |
          import requests

          url = "http://ru.epg.one/epg.xml.gz"
          output_path = "./epg.xml.gz"

          response = requests.get(url)
            if response.status_code == 200:
                with open(output_path, "wb") as f:
                f.write(response.content)
                print("File downloaded successfully.")
            else:
            print(f"Failed to download file. Status code: {response.status_code}")
          sys.exit()